<body>
    <div><a class="go-back-button" routerLink="/main-page"><<< Powrót do strony głownej  </a></div>
    <form #scrollMe>

        <div class="form-header">Dane personalne</div>

        <div class="form-group" >

                <div *ngIf="edits[0]" class="data-edit">

                    <mat-form-field appearance="fill">
                      <mat-label>Imię:</mat-label>
                      <input matInput [formControl]="NameControl" required>
                      <mat-error *ngIf="NameControl.invalid">{{getNameErrorMessage()}}</mat-error>
                    </mat-form-field>

                    <button mat-button [disabled]="NameControl.invalid" class="btn btn-light mat-raised-button" (click)="(SaveData(0,NameControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.Name==null" class="btn btn-light" (click)="DisableEdit(0)">Anuluj</button>
                </div>

                <div *ngIf="!edits[0]" class="form-group-header">
                    <div class="field-name">Imię:</div>
                    <div class="data">{{userInfo.Name}}</div>
                    <div class="edit" >
                        <div (click)="EnableEdit(0)">Edytuj</div>
                    </div>
                </div>
        </div>

        <div class="form-group" >

          <div *ngIf="edits[1]" class="data-edit">

              <mat-form-field appearance="fill">
                <mat-label>Nazwisko:</mat-label>
                <input matInput [formControl]="SurNameControl">
                <mat-error *ngIf="SurNameControl.invalid">{{getSurNameErrorMessage()}}</mat-error>
              </mat-form-field>

              <button mat-button [disabled]="SurNameControl.invalid" class="btn btn-light mat-raised-button" (click)="(SaveData(1,SurNameControl.value!))">Zaakceptuj</button>
              <button mat-button [disabled]="userInfo.SurName==null" class="btn btn-light" (click)="DisableEdit(1)">Anuluj</button>

          </div>

          <div *ngIf="!edits[1]" class="form-group-header">
              <div class="field-name">Nazwisko:</div>
              <div class="data">{{userInfo.SurName}}</div>
              <div class="edit">
                  <div (click)="EnableEdit(1)">Edytuj</div>
              </div>
          </div>
        </div>

        <div class="form-group" >

            <div *ngIf="edits[2]" class="data-edit">

                    <mat-form-field appearance="fill">
                        <mat-label>Data urodzenia</mat-label>
                        <input matInput [matDatepicker]="picker" matInput [formControl]="BirthDateControl">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="BirthDateControl.invalid">{{getBirthDateErrorMessage()}}</mat-error>
                    </mat-form-field>

                    <button mat-button [disabled]="BirthDateControl.invalid" type="button" class="btn btn-light mat-raised-button" (click)="(SaveData(2,BirthDateControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.BirthDate==null" class="btn btn-light" (click)="DisableEdit(2)">Anuluj</button>
            </div>

            <div *ngIf="!edits[2]" class="form-group-header">
                <div class="field-name">Data urodzenia:</div>
                <div class="data">{{userInfo.BirthDate}}</div>
                <div class="edit"  >
                    <div (click)="EnableEdit(2)">Edytuj</div>
                </div>
            </div>

        </div>

        <div class="form-header">Praca</div>

        <div class="form-group" >

                <div *ngIf="edits[3]" class="data-edit">

                    <mat-form-field appearance="fill">
                      <mat-label>Zawód</mat-label>
                      <mat-select matInput [formControl]="JobTypeControl">
                        <mat-option *ngFor="let job of jobbs" [value]="job.name">{{job.name}}</mat-option>
                      </mat-select>
                      <mat-error *ngIf="NameControl.invalid">{{getJobTypeErrorMessage()}}</mat-error>
                    </mat-form-field>

                    <button mat-button [disabled]='JobTypeControl.invalid' class="btn btn-light mat-raised-button" (click)="(SaveData(3,JobTypeControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.JobDetails.Name==null" mat-button [disabled]="userInfo.JobDetails.Name==null" class="btn btn-light" (click)="DisableEdit(3)">Anuluj</button>

                  </div>

                <div *ngIf="!edits[3]" class="form-group-header">
                    <div class="field-name">Zawód</div>
                    <div class="data">{{userInfo.JobDetails.Name}}</div>
                    <div class="edit" (click)="EnableEdit(3)" >
                        <div *ngIf="!edits[3]">Edytuj</div>
                    </div>
                </div>
        </div>

        <div class="form-group" >

                <div *ngIf="edits[4]" class="data-edit">
                    <mat-form-field appearance="fill">
                        <mat-label>Data rozpoczęcia pracy</mat-label>
                        <input matInput [matDatepicker]="picker" matInput [formControl]="JobStartDateControl">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="NameControl.invalid">{{getJobStartDateErrorMessage()}}</mat-error>
                    </mat-form-field>

                    <button mat-button [disabled]="JobStartDateControl.invalid" class="btn btn-light mat-raised-button" (click)="(SaveData(4,JobStartDateControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.JobDetails.StartDate==null" class="btn btn-light" (click)="DisableEdit(4)">Anuluj</button>
                </div>
                <div *ngIf="!edits[4]" class="form-group-header">
                    <div class="field-name">Data Rozpoczęcia pracy:</div>
                    <div class="data">{{userInfo.JobDetails.StartDate}}</div>
                    <div class="edit" (click)="EnableEdit(4)" >
                        <div *ngIf="!edits[4]">Edytuj</div>
                    </div>
                </div>

        </div>

        <div class="form-group" >

                <div *ngIf="edits[5]" class="data-edit">
                    <mat-form-field appearance="fill">
                        <mat-label>Data zakończenia pracy</mat-label>
                        <input matInput [matDatepicker]="picker" matInput [formControl]="JobEndDateControl">
                        <mat-hint>MM/DD/YYYY, w przypadku braku zostaw puste</mat-hint>
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>


                    <button mat-button [disabled]="JobEndDateControl.invalid" class="btn btn-light mat-raised-button" (click)="(SaveData(5,JobEndDateControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.JobDetails.EndDate==null" class="btn btn-light" (click)="DisableEdit(5)">Anuluj</button>
                </div>
                <div *ngIf="!edits[5]" class="form-group-header">
                    <div class="field-name">Data Zakończenia pracy:</div>
                    <div class="data">{{userInfo.JobDetails.EndDate}}<div *ngIf='userInfo.JobDetails.EndDate==""'>brak</div></div>
                    <div class="edit" (click)="EnableEdit(5)" >
                        <div *ngIf="!edits[5]">Edytuj</div>
                    </div>
                </div>

        </div>

        <div class="form-header">Dokument</div>

        <div class="form-group" >

                <div *ngIf="edits[6]" class="data-edit">

                      <mat-form-field appearance="fill">
                        <mat-label>Typ dokumentu</mat-label>
                        <mat-select matInput [formControl]="GovDocumentTypeControl">
                          <mat-option *ngFor="let id of idds" [value]="id.name">{{id.name}}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="NameControl.invalid">{{getGovDocumentTypeErrorMessage()}}</mat-error>
                      </mat-form-field>

                    <button mat-button [disabled]='GovDocumentTypeControl.invalid' class="btn btn-light mat-raised-button" (click)="(SaveData(6,GovDocumentTypeControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.GovernmentDocument.Name==null" mat-button class="btn btn-light" (click)="DisableEdit(6)">Anuluj</button>

                </div>

                <div *ngIf="!edits[6]" class="form-group-header">
                    <div class="field-name">Rodzaj dokumentu:</div>
                    <div class="data">{{userInfo.GovernmentDocument.Name}}</div>
                    <div class="edit" (click)="EnableEdit(6)" >
                        <div *ngIf="!edits[6]">Edytuj</div>
                    </div>
                </div>

        </div>

        <div class="form-group" >

                <div *ngIf="edits[7]" class="data-edit">

                    <mat-form-field appearance="fill">
                        <mat-label>Enter your password</mat-label>
                        <input matInput [type]="hide ? 'password' : 'text'" matInput [formControl]="GovDocumentNumberControl" required>
                        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="NameControl.invalid">{{getGovDocumentNumberErrorMessage()}}</mat-error>
                      </mat-form-field>

                    <button mat-button [disabled]="GovDocumentNumberControl.invalid" class="btn btn-light mat-raised-button" (click)="(SaveData(7,GovDocumentNumberControl.value!))">Zaakceptuj</button>
                    <button mat-button [disabled]="userInfo.GovernmentDocument.Number==null" class="btn btn-light" (click)="DisableEdit(7)">Anuluj</button>

                </div>
                <div *ngIf="!edits[7]" class="form-group-header">
                    <div class="field-name" type="password">Numer Dokumentu:</div>
                    <div class="data">************</div>
                    <div class="edit" (click)="EnableEdit(7)" >
                        <div *ngIf="!edits[7]">Edytuj</div>
                    </div>
                </div>

        </div>

        <div id="save-error" *ngIf="saveError">Dane nie zostały zapisane, uzupełnij wymagane pola</div>
        <div *ngIf="saveSuccess">Dane pomyślnie zapisane</div>
        <div class="finish-buttons">
          <button mat-raised-button color="warn" (click)="DiscardForm()">Odrzuć Zmiany</button>
          <button mat-raised-button color="primary" (click)="SubmitForm()">Zapisz Zmiany</button>
        </div>

    </form>
</body>
